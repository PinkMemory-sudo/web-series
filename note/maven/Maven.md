**为什么需要Maven**

两大功能：项目构建和依赖管理

需要的jar包必须手动放到WEB-INF/lib下。需要的jar包需要自己去下载，并且jar包依赖的jar包也需要下载。而Maven只需要提供坐标，引用仓库中的jar包。解决了jar包管理，我们提供jar的坐标，然后根据坐标引用本地仓库，如果本地从仓库没有就去公司私服，私服没有就去远程的maven仓库，最后同步到本地和公司私服。

一个项目就是一个工程。？一个项目拆分成多个工程



**什么是Maven**

Java开发的，服务于Java平台的自动化构建工具

什么是构建：将代码，配置文件等资源去构建一个可以运行的项目的过程(编译，测试，打包等，最后将编译结果放到对应的位置的过程)。



**最终运行的是编译的结果**，所以不能以工程的目录为标准



什么是类路径？编译结果的路径？怎么获得类路径？



**Maven生命周期**

maven的生命周期通过各个插件来完成。执行命令需要用到某些命令时会去本地仓库查找对应的脚本。无论执行什么，都是从最开始的clean开始的。

***清理*** ：删除上次编译的残余，重新编译

***编译*** ：

***测试***  ：自动测试，保证本次修改不影响上次

***打包 ***： 

***安装*** ： 安装打包的项目到本地仓库，以供其他项目使用

***部署*** ： 拷贝最终的工程包到远程仓库中，以共享给其他开发人员和工程





**修改本地仓库位置**

1. 打开maven的conf/settings.xml 
2. 修改localRepository标签



**修改下载源**

```xml
<mirrors>
    <mirror>
      <id>alimaven</id>
      <name>aliyun maven</name>
      <url>http://maven.aliyun.com/nexus/content/groups/public/</url>
      <mirrorOf>central</mirrorOf>        
    </mirror>
</mirrors>
```





**自动化构建**



**Maven命令**

| 命令        | 说明                         |
| ----------- | ---------------------------- |
| mvn -v      | 查看maven版本                |
| mvn clean   | 清理                         |
| mvn compile | 编译                         |
| mvn test    | 测试                         |
| mvn package | 打包                         |
| mvn install | 打包到本地仓库               |
| -D          | 传递参数                     |
| -e          | 显示运行出错的信息           |
| -o          | 离线执行，不要去远程仓库     |
| -U          | 强制去远程仓库更新snapshot包 |



# POM

Project Object Model 项目对象模型

包含了项目的基本信息和如何构建项目以及声明项目的依赖，执行maven命令时会先找pom文件读取配置。



## 插件



## **maven标签**



`parent`

没有指定父pom时使用默认的父pom

`packaging`

项目构建生成的文件类型，如jar，war等

`name`

项目的名称，生成文档时候用

`url`

项目主页的url，生成文档时使用

`description`

项目描述

`prerequisites`

构建唤醒的前提条件

`ciManagement`

持续集成

`developers`

开发者信息

`build`

构建项目



**坐标**

公司或组织的倒叙+项目名

模块名

版本号：snapshot，release



**依赖范围**

就是这些依赖哪些范围是可以使用的，参不参与打包。

常用三个取值

***compile***

在maven的项目目录中大致分为main目录，test目录，main中的程序可以使用compile范围的依赖，test目录中的程序也可以使用，参与打包

***test***

main目录下的程序使用不了test范围的依赖，只能被test目录下的程序使用，不参与打包

***provided***

与程序的开发阶段有关(通常用于web工程)，开发，部署，运行三个阶段。如运行时服务器可以提供的(如servlet)，则只需要在开发阶段使用，部署和运行为了不冲突应该不使用。



**依赖的传递性**

如何使用依赖传递性：可以传递的依赖，不必在每个工程的POM文件中声明，所以可以使用一个基础模块来导入依赖。

非compile范围的依赖不会传递



**依赖的排除**

情景：引入的一个依赖又依赖其他依赖，由于某种原因不想要依赖的依赖

使用`exclusion`标签



**解决依赖冲突**

maven的解决方法时就近优先，路径最近的优先，比如A依赖B，B依赖C，A和B都依赖D，但是版本不同，就发生了冲突，B的D离A近，就会选择B依赖的D。路径想同时现在POM文件中声明的优先



也可以自己明确声明



**统一管理依赖版本号**

情景：Spring要升级

`properties`



**自定义依赖**



